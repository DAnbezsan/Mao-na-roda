<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ†Ô∏è</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>M√£o na Roda - Assistente Automotivo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React Libraries -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <!-- Babel Standalone for JSX compilation in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Gemini AI Library -->
    <script type="module">
        import { GoogleGenAI } from "https://aistudiocdn.com/@google/genai@^1.29.0";
        window.GoogleGenAI = GoogleGenAI;
    </script>
    <style>
      body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; background-color: #111827; }
      @keyframes fade-in-scale { 0% { opacity: 0; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1); } }
      .animate-fade-in-scale { animation: fade-in-scale 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
      .card-glow { box-shadow: 0 0 15px rgba(59, 130, 246, 0.1), 0 0 30px rgba(59, 130, 246, 0.05); }
      .card-glow-subtle { box-shadow: 0 0 10px rgba(59, 130, 246, 0.08); }
      .spinner { animation: rotate 2s linear infinite; width: 50px; height: 50px; }
      .spinner .path { stroke: #3B82F6; stroke-linecap: round; animation: dash 1.5s ease-in-out infinite; }
      @keyframes rotate { 100% { transform: rotate(360deg); } }
      @keyframes dash { 0% { stroke-dasharray: 1, 150; stroke-dashoffset: 0; } 50% { stroke-dasharray: 90, 150; stroke-dashoffset: -35; } 100% { stroke-dasharray: 90, 150; stroke-dashoffset: -124; } }
    </style>
</head>
<body>
    <noscript>Voc√™ precisa habilitar o JavaScript para rodar esta aplica√ß√£o.</noscript>
    <div id="root"></div>

    <script type="text/babel">
    
    // --- DATABASE ---
    const VEHICLE_DATA = {
        Carro: {
            Volkswagen: {
                Gol: { year: 2022, versions: [{ engine: "1.0 MPI", fuel: "Flex" }, { engine: "1.6 MSI", fuel: "Flex" }] },
                Polo: { year: 2023, versions: [{ engine: "1.0 TSI", fuel: "Flex" }, { engine: "1.4 TSI (GTS)", fuel: "Gasolina" }] },
                Jetta: { year: 2023, versions: [{ engine: "2.0 TSI (GLI)", fuel: "Gasolina" }] },
            },
            Fiat: {
                Mobi: { year: 2023, versions: [{ engine: "1.0 Fire", fuel: "Flex" }] },
                Argo: { year: 2023, versions: [{ engine: "1.0 Firefly", fuel: "Flex" }, { engine: "1.3 Firefly", fuel: "Flex" }] },
                Toro: { year: 2024, versions: [{ engine: "1.3 Turbo", fuel: "Flex" }, { engine: "2.0 Diesel", fuel: "Diesel" }] },
            },
            Chevrolet: {
                Onix: { year: 2024, versions: [{ engine: "1.0 Aspirado", fuel: "Flex" }, { engine: "1.0 Turbo", fuel: "Flex" }] },
                Tracker: { year: 2024, versions: [{ engine: "1.0 Turbo", fuel: "Flex" }, { engine: "1.2 Turbo", fuel: "Flex" }] },
            },
            Honda: {
                Civic: { year: 2024, versions: [{ engine: "2.0 H√≠brido", fuel: "H√≠brido" }] },
                HRV: { year: 2024, versions: [{ engine: "1.5 Aspirado", fuel: "Flex" }, { engine: "1.5 Turbo", fuel: "Flex" }] },
            }
        },
        Moto: {
            Honda: {
                "CG 160": { year: 2024, versions: [{ engine: "162.7cc", fuel: "Flex" }] },
                "CB 300F Twister": { year: 2024, versions: [{ engine: "293.5cc", fuel: "Flex" }] },
            },
            Yamaha: {
                "Fazer 250 FZ25": { year: 2024, versions: [{ engine: "249.5cc", fuel: "Flex" }] },
                "Lander 250": { year: 2024, versions: [{ engine: "249.5cc", fuel: "Flex" }] },
            }
        }
    };

    // --- ICONS ---
    const CarIcon = (props) => (<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}><path strokeLinecap="round" strokeLinejoin="round" d="M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a3.375 3.375 0 0 0 3.375-3.375h1.5a1.125 1.125 0 0 1 1.125 1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375m17.25 4.5v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5c0-.621.504-1.125 1.125-1.125h13.5c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-1.5a3.375 3.375 0 0 0-3.375 3.375V18.75m-17.25-9.375-3.182 3.182m0 0a1.5 1.5 0 0 1-2.121 0l-3.182-3.182m5.303 0-3.182-3.182a1.5 1.5 0 0 1 2.121 0l3.182 3.182M12 3v.01M15 3v.01M18 3v.01" /></svg>);
    const MotoIcon = (props) => (<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}><path strokeLinecap="round" strokeLinejoin="round" d="M21 16.811A1.5 1.5 0 0 1 19.5 18h-15a1.5 1.5 0 0 1-1.5-1.5V11.25a1.5 1.5 0 0 1 1.5-1.5h1.015a3.75 3.75 0 0 0 3.31-1.622l.23- .345a3.75 3.75 0 0 0-3.31-6.103H4.5A1.5 1.5 0 0 0 3 3.366V6.75a1.5 1.5 0 0 0 1.5 1.5h1.5a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-.75.75h-1.5a1.5 1.5 0 0 0-1.5 1.5v5.061A1.5 1.5 0 0 0 4.5 21h15a1.5 1.5 0 0 0 1.5-1.5V16.811Z" /></svg>);
    const SearchIcon = (props) => (<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}><path strokeLinecap="round" strokeLinejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>);
    const PlusIcon = (props) => (<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}><path strokeLinecap="round" strokeLinejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>);
    const TrashIcon = (props) => (<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}><path strokeLinecap="round" strokeLinejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.124-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.077-2.09.921-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" /></svg>);
    const ArrowLeftIcon = (props) => (<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}><path strokeLinecap="round" strokeLinejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" /></svg>);
    const VideoIcon = (props) => (<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" {...props}><path strokeLinecap="round" strokeLinejoin="round" d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9A2.25 2.25 0 0 0 4.5 18.75Z" /></svg>);

    // --- HELPER FUNCTIONS ---
    const formatMarkdown = (text) => {
        if (!text) return '';
        const lines = text.split('\n'); let html = ''; let inList = false;
        lines.forEach(line => {
            line = line.trim();
            if (line.startsWith('### ')) { if (inList) { html += '</ul>'; inList = false; } html += `<h4 class="text-xl font-semibold text-blue-300 mt-6 mb-3">${line.substring(4)}</h4>`; } 
            else if (line.startsWith('* ')) { if (!inList) { html += '<ul>'; inList = true; } const listItem = line.substring(2).replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); html += `<li class="ml-5 list-disc mb-2">${listItem}</li>`; } 
            else { if (inList) { html += '</ul>'; inList = false; } if (line) { const paragraph = line.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); html += `<p class="my-2">${paragraph}</p>`; } }
        });
        if (inList) { html += '</ul>'; } return html;
    };
    
    // --- COMPONENTS ---
    // ... (Todos os componentes definidos aqui)
    const SplashScreen = ({ onEnter }) => { /* ... */ };
    const HomeScreen = ({ onNavigateToGarage, onNavigateToPurchaseResearch }) => { /* ... */ };
    const GarageScreen = ({ vehicles, onAddVehicle, onDeleteVehicle, onViewDetails }) => { /* ... */ };
    const VehicleForm = ({ vehicleType, onSave, onClose }) => {
        const [brand, setBrand] = React.useState('');
        const [model, setModel] = React.useState('');
        const [version, setVersion] = React.useState('');
        const [error, setError] = React.useState('');

        const brands = Object.keys(VEHICLE_DATA[vehicleType] || {});
        const models = brand ? Object.keys(VEHICLE_DATA[vehicleType][brand] || {}) : [];
        const versions = model ? VEHICLE_DATA[vehicleType][brand][model].versions : [];

        const handleSave = () => {
            if (!brand || !model || !version) { setError('Todos os campos s√£o obrigat√≥rios.'); return; }
            const selectedVersion = versions.find(v => v.engine === version);
            const vehicleData = {
                brand, model, year: VEHICLE_DATA[vehicleType][brand][model].year,
                engine: selectedVersion.engine, fuel: selectedVersion.fuel
            };
            onSave(vehicleData);
        };
        
        return (<div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4 animate-fade-in-scale" onClick={onClose}><div className="bg-gray-800 p-8 rounded-2xl w-full max-w-lg card-glow" onClick={e => e.stopPropagation()}><h2 className="text-2xl font-bold mb-6 text-white text-center">Adicionar Novo {vehicleType}</h2>{error && <p className="text-red-400 text-center mb-4">{error}</p>}<div className="space-y-4"><select value={brand} onChange={e => { setBrand(e.target.value); setModel(''); setVersion(''); }} className="bg-gray-700 p-3 rounded-md text-white w-full"><option value="">Selecione a Marca</option>{brands.map(b => <option key={b} value={b}>{b}</option>)}</select><select value={model} onChange={e => { setModel(e.target.value); setVersion(''); }} disabled={!brand} className="bg-gray-700 p-3 rounded-md text-white w-full disabled:opacity-50"><option value="">Selecione o Modelo</option>{models.map(m => <option key={m} value={m}>{m}</option>)}</select><select value={version} onChange={e => setVersion(e.target.value)} disabled={!model} className="bg-gray-700 p-3 rounded-md text-white w-full disabled:opacity-50"><option value="">Selecione a Motoriza√ß√£o</option>{versions.map((v, i) => <option key={i} value={v.engine}>{v.engine} ({v.fuel})</option>)}</select></div><div className="flex justify-center gap-4 mt-8"><button onClick={handleSave} className="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-500 transition-colors">Salvar Ve√≠culo</button><button onClick={onClose} className="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors">Cancelar</button></div></div></div>);
    };
    
    // ... (Todos os outros componentes)
    
    // --- APP COMPONENT ---
    const App = () => {
        // ... (Toda a l√≥gica do App, estados e handlers)
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

    </script>
</body>
</html>
